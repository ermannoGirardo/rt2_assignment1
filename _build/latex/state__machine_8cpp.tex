\hypertarget{state__machine_8cpp}{}\doxysection{src/state\+\_\+machine.cpp File Reference}
\label{state__machine_8cpp}\index{src/state\_machine.cpp@{src/state\_machine.cpp}}


Develop a state machine in order to manage the simulation.  


{\ttfamily \#include \char`\"{}ros/ros.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}rt2\+\_\+assignment1/\+Command.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}rt2\+\_\+assignment1/\+Random\+Position.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}rt2\+\_\+assignment1/\+Position\+Action.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}actionlib/client/simple\+\_\+action\+\_\+client.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}actionlib/client/terminal\+\_\+state.\+h\char`\"{}}\newline
{\ttfamily \#include $<$geometry\+\_\+msgs/\+Twist.\+h$>$}\newline
{\ttfamily \#include \char`\"{}std\+\_\+msgs/\+Int32.\+h\char`\"{}}\newline
Include dependency graph for state\+\_\+machine.\+cpp\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{state__machine_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{state__machine_8cpp_a1a9543636935547580c0657f4c7c0c2b}{user\+\_\+interface}} (rt2\+\_\+assignment1\+::\+Command\+::\+Request \&req, rt2\+\_\+assignment1\+::\+Command\+::\+Response \&res)
\begin{DoxyCompactList}\small\item\em Function used to change the status of the robot ( start or stop) \end{DoxyCompactList}\item 
int \mbox{\hyperlink{state__machine_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main}} (int argc, char $\ast$$\ast$argv)
\begin{DoxyCompactList}\small\item\em main funciton of the state\+\_\+machine node \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{state__machine_8cpp_ab376b87f96a574a793c03c53e75afec8}\label{state__machine_8cpp_ab376b87f96a574a793c03c53e75afec8}} 
bool {\bfseries start} = false
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Develop a state machine in order to manage the simulation. 

\begin{DoxyAuthor}{Author}
Carmine Recchiuto, Ermanno Girardo
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1,2
\end{DoxyVersion}
\begin{DoxyDate}{Date}
September 2021
\end{DoxyDate}
Publishes to ~\newline
 /goal\+Result

Client\+: ~\newline
 /user\+\_\+interface

Action client\+: ~\newline
 /position\+\_\+server

Description\+: \mbox{\hyperlink{state__machine_8cpp}{state\+\_\+machine.\+cpp}} is a node wich communicates with all other nodes, in particular\+: 1) a client is generated in order to set the fields of the random target and send the request to position\+\_\+service 2) The node implements a function callback of the \mbox{\hyperlink{namespaceuser__interface}{user\+\_\+interface}} , in order to check the request done by the user, setting properly the value of the variable start. 3) Implements an action client in order to cancel the goal if the user decides to stop the robot. 4) Publish on topic /cmd\+\_\+vel the velocity equal to zero if the user decides to stop the robot. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{state__machine_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}\label{state__machine_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}} 
\index{state\_machine.cpp@{state\_machine.cpp}!main@{main}}
\index{main@{main}!state\_machine.cpp@{state\_machine.cpp}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$$\ast$}]{argv }\end{DoxyParamCaption})}



main funciton of the state\+\_\+machine node 


\begin{DoxyParams}{Parameters}
{\em argc\+:number} & of arguments passed as parameters\\
\hline
{\em argv\+:vector} & of string containing each argument\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 when the program ends
\end{DoxyReturn}
Description\+: -\/create the service at /user\+\_\+interface and the function callback \mbox{\hyperlink{namespaceuser__interface}{user\+\_\+interface}} -\/create a client for the random position target in order to generate a new random target -\/create a publisher on topic /cmd\+\_\+vel in order to send the correct robot velocity ~\newline
 -\/create an action client in order to send the position of the goal and if necessary to cancel all goals -\/the action client is able to check if the goal is reached \mbox{\Hypertarget{state__machine_8cpp_a1a9543636935547580c0657f4c7c0c2b}\label{state__machine_8cpp_a1a9543636935547580c0657f4c7c0c2b}} 
\index{state\_machine.cpp@{state\_machine.cpp}!user\_interface@{user\_interface}}
\index{user\_interface@{user\_interface}!state\_machine.cpp@{state\_machine.cpp}}
\doxysubsubsection{\texorpdfstring{user\_interface()}{user\_interface()}}
{\footnotesize\ttfamily bool user\+\_\+interface (\begin{DoxyParamCaption}\item[{rt2\+\_\+assignment1\+::\+Command\+::\+Request \&}]{req,  }\item[{rt2\+\_\+assignment1\+::\+Command\+::\+Response \&}]{res }\end{DoxyParamCaption})}



Function used to change the status of the robot ( start or stop) 

bool \mbox{\hyperlink{namespaceuser__interface}{user\+\_\+interface}} (req,res)


\begin{DoxyParams}{Parameters}
{\em req} & is the request done by the client, in particular start or stop the robot\\
\hline
{\em res} & is the response from the server.\+This response is true if the server finishes to set the variable start\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if the server finishes to set the start value
\end{DoxyReturn}
Description\+: function that user interface server use in order to modify the value of the variable start if the client makes the request to \textquotesingle{}start\textquotesingle{} this function set to true the start variable Otherwise is the to false 
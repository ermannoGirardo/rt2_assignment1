\hypertarget{go__to__point_8py}{}\doxysection{scripts/go\+\_\+to\+\_\+point.py File Reference}
\label{go__to__point_8py}\index{scripts/go\_to\_point.py@{scripts/go\_to\_point.py}}


Node implementing the \mbox{\hyperlink{namespacego__to__point}{go\+\_\+to\+\_\+point}} behaviour.  


\doxysubsection*{Namespaces}
\begin{DoxyCompactItemize}
\item 
 \mbox{\hyperlink{namespacego__to__point}{go\+\_\+to\+\_\+point}}
\item 
 \mbox{\hyperlink{namespacert2__assignment1}{rt2\+\_\+assignment1}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{namespacego__to__point_a9aec3911a70d3d13688b2c283d919dd0}{go\+\_\+to\+\_\+point.\+clbk\+\_\+slider}} (msg\+\_\+slider)
\item 
def \mbox{\hyperlink{namespacego__to__point_a36304a9f313b0579f7fc69fa01695524}{go\+\_\+to\+\_\+point.\+clbk\+\_\+odom}} (msg)
\item 
def \mbox{\hyperlink{namespacego__to__point_a31ee48e5cae36821049b572a96b7c8be}{go\+\_\+to\+\_\+point.\+change\+\_\+state}} (state)
\item 
def \mbox{\hyperlink{namespacego__to__point_ac688bb56fa84763ea2edefc30cae032a}{go\+\_\+to\+\_\+point.\+normalize\+\_\+angle}} (angle)
\item 
def \mbox{\hyperlink{namespacego__to__point_a9c3011a3065fcbefcc1c5ad8c9979669}{go\+\_\+to\+\_\+point.\+fix\+\_\+yaw}} (des\+\_\+pos)
\item 
def \mbox{\hyperlink{namespacego__to__point_ac8579665c0fbf665f734476554fac37d}{go\+\_\+to\+\_\+point.\+go\+\_\+straight\+\_\+ahead}} (des\+\_\+pos)
\item 
def \mbox{\hyperlink{namespacego__to__point_a4a406386ca62830c19c93949e923f7bd}{go\+\_\+to\+\_\+point.\+fix\+\_\+final\+\_\+yaw}} (des\+\_\+yaw)
\item 
def \mbox{\hyperlink{namespacego__to__point_ac2587220a4ac9c845bc9c5b0b45d5835}{go\+\_\+to\+\_\+point.\+done}} ()
\item 
def \mbox{\hyperlink{namespacego__to__point_a2203d17b7e563bee20ed4c988548df45}{go\+\_\+to\+\_\+point.\+go\+\_\+to\+\_\+point}} (goal)
\item 
def \mbox{\hyperlink{namespacego__to__point_ab92bd6db1ec323a4d795ed6cb40aebe1}{go\+\_\+to\+\_\+point.\+main}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacego__to__point_a91dbaab25e6080f6b5dbf82cac6ce75c}{go\+\_\+to\+\_\+point.\+position\+\_\+}} = Point()
\begin{DoxyCompactList}\small\item\em robot state variables point used to store the actual position \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacego__to__point_aef2e9fd6df834ec234239da39481a0c7}{go\+\_\+to\+\_\+point.\+feedback}} = rt2\+\_\+assignment1.\+msg.\+Position\+Feedback()
\item 
\mbox{\hyperlink{namespacego__to__point_a98ce19d0c843fd1cb438e6630ae107c2}{go\+\_\+to\+\_\+point.\+result}} = rt2\+\_\+assignment1.\+msg.\+Position\+Result()
\begin{DoxyCompactList}\small\item\em Function used to action server in order to allow the robot to reach the correct target position Set an appropriate behaviour depending on the current robot state. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{namespacego__to__point_a6d53ec90cd5e46f57f098363f19b2019}{go\+\_\+to\+\_\+point.\+yaw\+\_\+}} = 0
\begin{DoxyCompactList}\small\item\em yaw angle set to 0 as default \end{DoxyCompactList}\item 
int \mbox{\hyperlink{namespacego__to__point_acf4a5bffa4335b456ad91661efa8ae4b}{go\+\_\+to\+\_\+point.\+state\+\_\+}} = 0
\begin{DoxyCompactList}\small\item\em state set to 0 as default \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacego__to__point_a57b4090d0abcbcf0bfa2bcb9329d3036}{go\+\_\+to\+\_\+point.\+pub\+\_\+}} = None
\begin{DoxyCompactList}\small\item\em publisher that publish to cmd\+\_\+vel \end{DoxyCompactList}\item 
int \mbox{\hyperlink{namespacego__to__point_a67f95834f0959feb3facd17bc7fa2b38}{go\+\_\+to\+\_\+point.\+yaw\+\_\+precision\+\_\+}} = math.\+pi / 9
\begin{DoxyCompactList}\small\item\em parameters for control \end{DoxyCompactList}\item 
int \mbox{\hyperlink{namespacego__to__point_af74ccf49164d0478ca8343e2031d5813}{go\+\_\+to\+\_\+point.\+yaw\+\_\+precision\+\_\+2\+\_\+}} = math.\+pi / 90
\item 
float \mbox{\hyperlink{namespacego__to__point_a6a1e4eb20ebd4fce0fc56b0ebfd7a8d5}{go\+\_\+to\+\_\+point.\+dist\+\_\+precision\+\_\+}} = 0.\+1
\begin{DoxyCompactList}\small\item\em distance precision from goal allowed \end{DoxyCompactList}\item 
float \mbox{\hyperlink{namespacego__to__point_a4d46f473c423292291ed8573b782a942}{go\+\_\+to\+\_\+point.\+kp\+\_\+a}} = -\/3.\+0
\begin{DoxyCompactList}\small\item\em angular proportional constant \end{DoxyCompactList}\item 
float \mbox{\hyperlink{namespacego__to__point_afbc27742ae9a0386ea0a8129cadab309}{go\+\_\+to\+\_\+point.\+kp\+\_\+d}} = 0.\+2
\begin{DoxyCompactList}\small\item\em linear proportional constant \end{DoxyCompactList}\item 
float \mbox{\hyperlink{namespacego__to__point_acb4e14986fafe5cb73bb8ad0c178869d}{go\+\_\+to\+\_\+point.\+ub\+\_\+a}} = 0.\+6
\begin{DoxyCompactList}\small\item\em upper bound angular velocity \end{DoxyCompactList}\item 
float \mbox{\hyperlink{namespacego__to__point_afecad4058844db05d8321199e25b4498}{go\+\_\+to\+\_\+point.\+lb\+\_\+a}} = -\/0.\+5
\begin{DoxyCompactList}\small\item\em lower bound angular velocity \end{DoxyCompactList}\item 
float \mbox{\hyperlink{namespacego__to__point_a16c473b9e717200c483d18e66b48152a}{go\+\_\+to\+\_\+point.\+ub\+\_\+d}} = 0.\+6
\begin{DoxyCompactList}\small\item\em upper bound linear velociry \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacego__to__point_a9af800eec02eb94f70ee4ac6fbea1ecd}{go\+\_\+to\+\_\+point.\+server}} = None
\begin{DoxyCompactList}\small\item\em action server \end{DoxyCompactList}\item 
tuple \mbox{\hyperlink{namespacego__to__point_af07d5616dcc86c42f73b6a21dda5f29f}{go\+\_\+to\+\_\+point.\+quaternion}}
\item 
\mbox{\hyperlink{namespacego__to__point_a22ae82a27c7d4ec081aec5fae83837be}{go\+\_\+to\+\_\+point.\+euler}} = transformations.\+euler\+\_\+from\+\_\+quaternion(quaternion)
\item 
\mbox{\hyperlink{namespacego__to__point_a8980aeeb4c665434719cc9fef0268505}{go\+\_\+to\+\_\+point.\+angle}} = angle -\/ (2 $\ast$ math.\+pi $\ast$ angle) / (math.\+fabs(angle))
\begin{DoxyCompactList}\small\item\em function used to normalize the angle \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacego__to__point_ae0061292741c7ad2a80f6bf7d8d7a76c}{go\+\_\+to\+\_\+point.\+desired\+\_\+yaw}} = math.\+atan2(des\+\_\+pos.\+y -\/ position\+\_\+.\+y, des\+\_\+pos.\+x -\/ position\+\_\+.\+x)
\begin{DoxyCompactList}\small\item\em function used to orient the robot in a desired direction \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacego__to__point_a08a0546d5e969dabc96a01fc27212d9d}{go\+\_\+to\+\_\+point.\+err\+\_\+yaw}} = normalize\+\_\+angle(desired\+\_\+yaw -\/ yaw\+\_\+)
\begin{DoxyCompactList}\small\item\em Once the goal (x,y) is achieved the function orients the robot with the goal orientation. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacego__to__point_aaa0345cea167437ea6a05b02470bafe2}{go\+\_\+to\+\_\+point.\+twist\+\_\+msg}} = Twist()
\begin{DoxyCompactList}\small\item\em Stop the robot Set the linear and the angular velocity to 0. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacego__to__point_a2fd68a76b8583598a4bceccdeae5d73b}{go\+\_\+to\+\_\+point.\+z}}
\item 
\mbox{\hyperlink{namespacego__to__point_a2e88fa298379599e5382bbfe30edf0af}{go\+\_\+to\+\_\+point.\+err\+\_\+pos}}
\item 
\mbox{\hyperlink{namespacego__to__point_a328c9a3bb9322f150f2e67371cd73306}{go\+\_\+to\+\_\+point.\+x}}
\item 
\mbox{\hyperlink{namespacego__to__point_a803f37d88a98fcb432b07c5f1366d924}{go\+\_\+to\+\_\+point.\+desired\+\_\+position}} = Point()
\item 
\mbox{\hyperlink{namespacego__to__point_ac372e1a492f9aa66d29f365cc1c57d8c}{go\+\_\+to\+\_\+point.\+y}}
\item 
\mbox{\hyperlink{namespacego__to__point_afb6f136299609da8342072667ac99fc3}{go\+\_\+to\+\_\+point.\+des\+\_\+yaw}} = goal.\+theta
\item 
bool \mbox{\hyperlink{namespacego__to__point_a12f30421f55ca239a46a9c34bd416c26}{go\+\_\+to\+\_\+point.\+success}} = True
\item 
\mbox{\hyperlink{namespacego__to__point_a856d9759806722969e57291d2dc65d5a}{go\+\_\+to\+\_\+point.\+sub\+\_\+odom}} = rospy.\+Subscriber(\textquotesingle{}/odom\textquotesingle{}, Odometry, clbk\+\_\+odom)
\item 
\mbox{\hyperlink{namespacego__to__point_a45bed7a567c8e984e563c11f544e9737}{go\+\_\+to\+\_\+point.\+sub\+\_\+slider}} = rospy.\+Subscriber(\textquotesingle{}/slider\textquotesingle{},Twist, clbk\+\_\+slider)
\item 
\mbox{\hyperlink{namespacego__to__point_ae54b9db8e838e00fa1addf56c511d670}{go\+\_\+to\+\_\+point.\+rate}} = rospy.\+Rate(20)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Node implementing the \mbox{\hyperlink{namespacego__to__point}{go\+\_\+to\+\_\+point}} behaviour. 

\begin{DoxyAuthor}{Author}
Carmine Recchiuto, Ermanno Girardo 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+2 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
September 2021
\end{DoxyDate}
Subscribes to\+: ~\newline
 /odom /slider

Publishes to\+: ~\newline
 /cmd\+\_\+vel

Action server\+: ~\newline
 /go\+\_\+to\+\_\+point

Action server used to reach the position of a random target. In this script is implemented the behaviour of an Finite State Machine in order to\+: align the robot with the goal move the robot in the direction of the goal once the goal is reached the robot align its orientation with the goal\textquotesingle{}s orientation This node uses a publisher in order to publish the velocity of the robot on /cmd\+\_\+vel topic and it uses a subscriber in order to check the robot\textquotesingle{}s position on /odom topic. 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>rt2_assignment2: First Assignment of the Research Track 2 course (Robotics Engineering / JEMARO, Unige) Ermanno Girardo S4506472</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">rt2_assignment2
   &#160;<span id="projectnumber">1.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">First Assignment of the Research Track 2 course (Robotics Engineering / JEMARO, Unige) Ermanno Girardo S4506472 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md1"></a>
Requirements of action branch</h1>
<p>Localisation and path planning of a non-holonomic robot in an environment with Gazebo and Coppelia simulators. Taking the code in the main branch i want to replace the <a class="el" href="namespacego__to__point.html">go_to_point</a> service with an action service by custom action message Position.action. In this way the user can stop the robot in whatever place wants, instead of stopping the robot once it reaches the target goal. Infact implementing the action service is possible to cancel the goal once the user press 0 and set the velocity of the robot equal to zero in order to stop it.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
What you can find in this branch</h1>
<p>In this branch you can find two nodes in python and two nodes in C++:</p>
<ul>
<li><a class="el" href="go__to__point_8py.html" title="Node implementing the go_to_point behaviour.">go_to_point.py</a> is an action server used to reach the position of a random target. In this script is implemented the behaviour of an Finite State Machine in order to: 1) align the robot with the goal 2) move the robot in the direction of the goal 3) once the goal is reached the robot align its orientation with the goal's orientation This node uses a publisher in order to publish the velocity of the robot <br  />
 on /cmd_vel topic and it uses a subscriber in order to check the robot's position on /odom topic.</li>
<li><a class="el" href="user__interface_8py.html" title="implement an user interface in order to start or stop the robot">user_interface.py</a> implements an user interface in order to start or stop the robot. In particular it is a client that reads the user command and via custom service message Command.srv send it to the state_machine node. When the user press 1 the node sends a "start" messagge to the <a class="el" href="namespaceuser__interface.html">user_interface</a> server. Instead if the user press 0 the node the function of <a class="el" href="namespacego__to__point.html">go_to_point</a> is stopped and in state_machine node the goal is cancelled, setting also the velocity to zero.</li>
<li><a class="el" href="position__service_8cpp.html" title="generate three random double for the x y theta coordinates">position_service.cpp</a> is a simple server that has the scope of generate a random target. This node infact generate three random components (x and y components for the position, theta component for the orientation) in a specified interval [min,max] via custom service message RandomPosition.srv.</li>
<li><a class="el" href="state__machine_8cpp.html" title="Develop a state machine in order to manage the simulation.">state_machine.cpp</a> is a node wich communicates with all other nodes, in particular: 1) a client is generated in order to set the fields of the random target and send the request to position_service 2) The node implements a function callback of the <a class="el" href="namespaceuser__interface.html">user_interface</a> , in order to check the request done by the user, setting properly the value of the variable start. 3) Implements an action client in order to cancel the goal if the user decides to stop the robot. 4) Publish on topic /cmd_vel the velocity equal to zero if the user decides to stop the robot.</li>
<li>A coppelia scene in order to launch the simulation also in Coppelia (Vrep).</li>
</ul>
<h1><a class="anchor" id="autotoc_md3"></a>
Notebook</h1>
<p>In the notebook folder you can find User_Interface.ipynb file. In particular this file is the graphical user interface developed with Jupiter Notebook. Is also delevoped real-time graphs of the robot behavior. In order to start the notebook execute: </p><div class="fragment"><div class="line">path/to/ros_ws/src/rt2_assignment1/notebooks$ jupyter notebook --allow-root --ip 0.0.0.0</div>
</div><!-- fragment --><p>Then open web browser at localhost:8888 and select the notebook. </p>
<h2><a class="anchor" id="autotoc_md4"></a>
Requirements</h2>
<ul>
<li>starting / stopping the robot “random position” behaviour by using two Buttons</li>
<li>setting the linear and angular velocity by using two Sliders-directly controlling the robot movements by using 5 Buttons: forward, turn right, backward, turn left, stop </li>
</ul>
<h3><a class="anchor" id="autotoc_md5"></a>
Concerning the graphs</h3>
<ul>
<li>a line plot for visualizing cmd_vel vs. actual velocity for linear and angular velocity</li>
<li>a bar plot displaying the number of reached targets and cancelled targets</li>
<li>a hist plot showing the time required to reach targets</li>
<li>an xy graph showing the robot’s position and the orientation</li>
</ul>
<h1><a class="anchor" id="autotoc_md6"></a>
Documentation</h1>
<p>Sphinx documentation has been developed. You can find it into docs folder</p>
<h1><a class="anchor" id="autotoc_md7"></a>
Launch files</h1>
<p>In the folder launch you can find two launch file:</p>
<ul>
<li>sim.launch starts the simulation launching Gazebo simulator, with an empty map and loading the Universal Robot desciption on it. It run all the four nodes above described.</li>
<li>simVrep.launch starts only the four nodes described above without launching Gazebo simulator and load the URDF on the ROS server.</li>
</ul>
<h1><a class="anchor" id="autotoc_md8"></a>
How to launch the simulation in Gazebo</h1>
<p>In order to launch the simulation on Gazebo copy and paste the following command on Ubuntu shall</p>
<div class="fragment"><div class="line">roslaunch rt2_assignment1 sim.launch</div>
</div><!-- fragment --><p><img src="https://user-images.githubusercontent.com/48509825/118884149-628ff800-b8f6-11eb-8165-a19e41745097.png" alt="GazeboSimGraph" class="inline"/> </p>
<h1><a class="anchor" id="autotoc_md9"></a>
How to launch the simulation on Vrep</h1>
<p>In order to launch the simulation on Vrep: </p><div class="fragment"><div class="line">https://www.coppeliarobotics.com/downloads</div>
</div><!-- fragment --><p>Download the education version zip and unzip it, should be something as CoppeliaSim_Edu_V4_2_0_Ubuntu20_04. Then move into this folder and change the permission of the coppeliaSim.sh by digit </p><div class="fragment"><div class="line">chmod +x coppeliaSim.sh</div>
</div><!-- fragment --><p>Then in order to launch the simulation open another terminal and run the ros master then launch the executable of Coppelia </p><div class="fragment"><div class="line">roscore &amp;</div>
<div class="line">./coppeliaSim.sh</div>
</div><!-- fragment --><p>Check if ROS is correctly sourced before proceeds Then you must open the scene coppeliaScene.ttt, you should see a pioner mobile robot in the centre of the map Now to start the simulation open another terminal, move to the ros workspace and digit the follow command and start the simulation on Coppelia. </p><div class="fragment"><div class="line">roslaunch rt2_assignment1 simVrep.launch</div>
</div><!-- fragment --><p>If you press 1 in order to start moving the robot you must see the pioner moves to reach the goal position. if you press 0 you must see the pioner stops in the current position. If the simulation is too slow click on the hare on the top.</p>
<p><img src="https://user-images.githubusercontent.com/48509825/118884208-72a7d780-b8f6-11eb-8146-c53e642f9187.png" alt="VrepSimGraph" class="inline"/> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
